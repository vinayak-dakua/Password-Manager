{% extends "base.html" %}

{% block title %}🔐 Generate Password{% endblock %}

{% block topbar_title %}
<h3>🔐 Generate Password</h3>
{% endblock %}

{% block content %}
<form method="POST" onsubmit="return validateCheckboxes();">
    <div class="mb-3">
        <label for="password_name" class="form-label">Name of the Password*</label>
        <input type="text" class="form-control" id="password_name" name="password_name" required>
    </div>

    <div class="mb-3">
        <label for="length" class="form-label">Length of the Password*</label>
        <input type="number" class="form-control" id="length" name="length" min="6" max="36" required>
    </div>

    <div class="mb-3">
        <label class="form-label">Include Characters:*</label><br>
        <input type="checkbox" name="lowercase" id="lowercase"> Lowercase<br>
        <input type="checkbox" name="uppercase" id="uppercase"> Uppercase<br>
        <input type="checkbox" name="numbers" id="numbers"> Numbers<br>
        <input type="checkbox" name="special" id="special"> Special Characters

        <!-- Fade warning -->
        <div id="char-warning" class="form-text text-danger" style="opacity: 0; font-size: 0.875em; transition: opacity 0.4s;">
            Please select at least one character type.
        </div>
    </div>

    <button type="submit" class="btn btn-primary">🔐 Generate Password</button>
</form>

{% if generated_password %}
<div class="generated-password mt-4">
    <strong>🔐 Generated Password:</strong> {{ generated_password }}
</div>
{% endif %}

<script>
// Checkboxes to watch
const checkboxes = ['lowercase', 'uppercase', 'numbers', 'special'];
const warning = document.getElementById('char-warning');

// Update visibility of warning message
function updateWarningVisibility() {
    const isAnyChecked = checkboxes.some(id => document.getElementById(id).checked);
    warning.style.opacity = isAnyChecked ? '0' : '1';
}

// Validate on form submit
function validateCheckboxes() {
    const isAnyChecked = checkboxes.some(id => document.getElementById(id).checked);
    if (!isAnyChecked) {
        warning.style.opacity = '1';
        return false;
    }
    return true;
}

// Attach change listeners after DOM is loaded
window.onload = function () {
    checkboxes.forEach(id => {
        document.getElementById(id).addEventListener('change', updateWarningVisibility);
    });
}
</script>
{% endblock %}
